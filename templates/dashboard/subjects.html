{% extends 'dashboard/base.html' %}
{% load static %}
{% block title %}Course Management{% endblock %}
{% block content %}
<div class="app-wrapper">

	<div class="app-content pt-3 p-md-3 p-lg-4">
		<div class="container-xl">

			<div class="d-flex justify-content-between align-items-center mb-4">
				<h1 class="app-page-title mb-0">Subjects</h1>
				<div class="d-flex align-items-center gap-3">
					<!-- <form class="table-search-form row gx-1 align-items-center">
						<div class="col-auto">
							<input type="text" id="search-orders" name="searchorders" class="form-control search-orders"
								placeholder="Search">
						</div>
						<div class="col-auto">
							<button type="submit" class="btn app-btn-secondary">Search</button>
						</div>
					</form> -->
					<a class="btn app-btn-primary text-nowrap" href="{% url 'add_subject' %}">Create New Subject</a>
				</div>
			</div>

			<div class="tab-content" id="orders-table-tab-content">
				<div class="tab-pane fade show active" id="orders-all" role="tabpanel" aria-labelledby="orders-all-tab">
					<div class="app-card app-card-orders-table shadow-sm mb-5">
						<div class="app-card-body">
							<div class="table-responsive">
								<table class="table app-table-hover mb-0 text-left">
									<thead>
										<tr>
											<th class="cell">ID</th>
											<th class="cell">Name</th>
											<th class="cell">Description</th>
											<th class="cell">Levels</th>
											<th class="cell">Stream</th>
											<th class="cell">Actions</th>
										</tr>
									</thead>
									<tbody>
										{% for subject in subjects %}
										<tr>
											<td class="cell">{{subject.id}}</td>
											<td class="cell"><span class="truncate">{{subject.name}}</span></td>
											<td class="cell">{{subject.description}}</td>
											<td class="cell">{{subject.levels}}</td>
											<td class="cell">
												{% with subject.streams.all as s_list %}
													{% if s_list.exists %}
														{% for stream in s_list %}
															{{ stream.name }}{% if not forloop.last %}, {% endif %}
														{% endfor %}
													{% else %}
														None
													{% endif %}
												{% endwith %}
											</td>
											<td class="cell"><a class="btn btn-outline-secondary" href="{% url 'dashboard:subject_detail' subject.id %}">View</a></td>
										</tr>
										{%endfor%}


									</tbody>
								</table>
							</div><!--//table-responsive-->

						</div><!--//app-card-body-->
					</div><!--//app-card-->

				</div><!--//tab-pane-->




			</div><!--//tab-content-->


		</div><!--//container-fluid-->
	</div><!--//app-content-->



</div><!--//app-wrapper-->


{% endblock %}
{% block extra_scripts %}
<script src="{% static 'dashboard/assets/plugins/popper.min.js' %}"></script>
<script src="{% static 'dashboard/assets/plugins/bootstrap/js/bootstrap.min.js' %}"></script>

<!-- Page Specific JS -->
<script src="{% static 'dashboard/assets/js/app.js' %}"></script>
{% endblock %}