
{% extends 'dashboard/base.html' %}
 {% load static %} 
 {% block title %}
 Student
{% endblock %}

 {% block content %}
<div class="app-wrapper">
	    
	    <div class="app-content pt-3 p-md-3 p-lg-4">
		    <div class="container-xl">
			    
			    <div class="d-flex justify-content-between align-items-center mb-4">
				    <h1 class="app-page-title mb-0"><i class="fas fa-video me-2"></i>Live Classes</h1>
				    <div class="d-flex align-items-center gap-3">
					    <div class="input-group" style="max-width: 300px;">
						    <span class="input-group-text border-0 bg-transparent"><i class="fas fa-search text-muted"></i></span>
						    <input type="text" id="liveclasses-search" class="form-control border-0 shadow-none" placeholder="Search live classesâ€¦" autocomplete="off" />
						    <button type="button" class="btn btn-link px-2 clear-search" hidden><i class="fas fa-times-circle text-muted"></i></button>
					    </div>
				        <a class="btn app-btn-primary text-nowrap" href="{% url 'add_live_class' %}"><i class="fas fa-plus me-2"></i>Create New Live Class</a>
				    </div>
			    </div>
				
				
				<div class="tab-content" id="orders-table-tab-content">
			        <div class="tab-pane fade show active" id="orders-all" role="tabpanel" aria-labelledby="orders-all-tab">
					    <div class="app-card app-card-orders-table shadow-sm mb-5">
						    <div class="app-card-body">
							    <div class="table-responsive">
							        <table id="liveclasses-table" class="table app-table-hover mb-0 text-left">
										<thead>
											<tr>
												<th class="cell" style="width: 5%;">ID</th>
												<th class="cell" style="width: 20%;">Class Title</th>
												<th class="cell" style="width: 12%;">Subject</th>
												<th class="cell" style="width: 12%;">Host/Teacher</th>
												<th class="cell" style="width: 10%;">Level</th>
												<th class="cell" style="width: 12%;">Course</th>
												<th class="cell" style="width: 14%;">Schedule</th>
												<th class="cell" style="width: 8%;">Status</th>
												<th class="cell" style="width: 7%;">Actions</th>
											</tr>
										</thead>
										<tbody>
											{% for class in live_classes %}
											<tr>
												<td class="cell">
													<span class="badge bg-secondary">#{{ class.id }}</span>
												</td>
												<td class="cell">
													<div class="d-flex align-items-center">
														<i class="fas fa-video text-danger me-2"></i>
														<strong>{{ class.title|truncatewords:5 }}</strong>
													</div>
												</td>
												<td class="cell">
													{% if class.subject %}
														<span class="badge bg-primary">{{ class.subject.name|truncatewords:2 }}</span>
													{% else %}
														<span class="badge bg-secondary">N/A</span>
													{% endif %}
												</td>
												<td class="cell">
													{% if class.hosts %}
														<div class="d-flex align-items-center">
															<i class="fas fa-user-tie text-success me-2"></i>
															<small>{{ class.hosts.get_full_name|truncatewords:2 }}</small>
														</div>
													{% else %}
														<span class="badge bg-secondary">No host</span>
													{% endif %}
												</td>
												<td class="cell">
													{% if class.level %}
														<span class="badge bg-info">{{ class.level.name }}</span>
													{% else %}
														<span class="badge bg-secondary">N/A</span>
													{% endif %}
												</td>
												<td class="cell">
													{% if class.course %}
														<small class="text-muted">{{ class.course.title|truncatewords:3 }}</small>
													{% else %}
														<span class="badge bg-secondary">N/A</span>
													{% endif %}
												</td>
												<td class="cell">
													<div class="d-flex flex-column">
														<small>
															<i class="fas fa-calendar text-primary me-1"></i>
															{{ class.start_time|date:"M d, Y" }}
														</small>
														<small class="text-muted">
															<i class="fas fa-clock me-1"></i>
															{{ class.start_time|time:"h:i A" }} - {{ class.end_time|time:"h:i A" }}
														</small>
													</div>
												</td>
												<td class="cell">
													{% if class.is_live %}
														<span class="badge bg-danger">
															<i class="fas fa-circle me-1"></i>LIVE
														</span>
													{% elif class.will_start_soon %}
														<span class="badge bg-warning text-dark">
															<i class="fas fa-clock me-1"></i>Soon
														</span>
													{% else %}
														<span class="badge bg-secondary">
															<i class="fas fa-calendar-check me-1"></i>Scheduled
														</span>
													{% endif %}
												</td>
												<td class="cell">
													<a class="btn btn-sm btn-outline-primary" href="{% url 'dashboard:liveclass_detail' class.id %}">
														<i class="fas fa-eye me-1"></i>View
													</a>
												</td>
											</tr>
											{% endfor %}
										</tbody>
									</table>
						        </div><!--//table-responsive-->
						       
						    </div><!--//app-card-body-->		
						</div><!--//app-card-->
						
	    
	    
{% endblock %} 
{% block extra_scripts %}
<script src="{% static 'dashboard/assets/plugins/popper.min.js' %}"></script>
<script src="{% static 'dashboard/assets/plugins/bootstrap/js/bootstrap.min.js' %}"></script>

<!-- Page Specific JS -->
<script src="{% static 'dashboard/assets/js/app.js' %}"></script>
<script src="{% static 'dashboard/assets/js/page-search.js' %}"></script>
<script>initPageSearch('liveclasses-search', 'liveclasses-table');</script>
{% endblock %}
