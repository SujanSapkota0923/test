{% extends 'dashboard/base.html' %} {% load static %} {% block title %}Course
Management{% endblock %} {% block content %}

<div class="app-wrapper">
  <div class="app-content pt-3 p-md-3 p-lg-4">
    <div class="container-xl">
      {% for message in messages %}
			<div class="alert alert-modern alert-dismissible fade show" role="alert">
				<div class="d-flex align-items-center">
					<i class="fas fa-info-circle me-3 fs-5"></i>
					<div class="flex-grow-1">{{ message }}</div>
				</div>
				<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
			</div>
			{% endfor %}
            <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="app-page-title mb-0"><i class="fas fa-play-circle me-2"></i>Videos</h1>
        <div class="d-flex align-items-center gap-3">
          <div class="input-group" style="max-width: 300px;">
            <span class="input-group-text border-0 bg-transparent"><i class="fas fa-search text-muted"></i></span>
            <input type="text" id="videos-search" class="form-control border-0 shadow-none" placeholder="Search videosâ€¦" autocomplete="off" />
            <button type="button" class="btn btn-link px-2 clear-search" hidden><i class="fas fa-times-circle text-muted"></i></button>
          </div>
          <a
            class="btn app-btn-primary text-nowrap"
            href="{% url 'dashboard:add_video' %}"
            ><i class="fas fa-plus me-2"></i>Create New Video</a
          >
        </div>
      </div>

      <div class="tab-content" id="orders-table-tab-content">
        <div
          class="tab-pane fade show active"
          id="orders-all"
          role="tabpanel"
          aria-labelledby="orders-all-tab"
        >
          <div class="app-card app-card-orders-table shadow-sm mb-5">
            <div class="app-card-body">
              <div class="table-responsive">
                <table id="videos-table" class="table app-table-hover mb-0 text-left">
                  <thead>
                    <tr>
                      <th class="cell" style="width: 5%;">ID</th>
                      <th class="cell" style="width: 8%;">Thumbnail</th>
                      <th class="cell" style="width: 20%;">Video Title</th>
                      <th class="cell" style="width: 12%;">Teacher</th>
                      <th class="cell" style="width: 10%;">Subject</th>
                      <th class="cell" style="width: 10%;">Level</th>
                      <th class="cell" style="width: 12%;">Course</th>
                      <th class="cell" style="width: 8%;">Cost</th>
                      <th class="cell" style="width: 15%;">Actions</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for video in videos %}
                    <tr>
                      <td class="cell">
                        <span class="badge bg-secondary">#{{video.id}}</span>
                      </td>
                      <td class="cell">
                        {% if video.image %}
                          <img src="{{ video.image.url }}" alt="{{ video.title }}" 
                               class="rounded" style="width: 50px; height: 50px; object-fit: cover;">
                        {% else %}
                          <div class="bg-danger text-white rounded d-flex align-items-center justify-content-center" 
                               style="width: 50px; height: 50px;">
                            <i class="fas fa-video"></i>
                          </div>
                        {% endif %}
                      </td>
                      <td class="cell">
                        <div class="d-flex flex-column">
                          <strong>{{video.title|truncatewords:5}}</strong>
                          <small class="text-muted">
                            <i class="fas fa-calendar text-muted me-1"></i>
                            {{video.uploaded_at|date:"M d, Y"}}
                          </small>
                        </div>
                      </td>
                      <td class="cell">
                        {% if video.teacher %}
                          <div class="d-flex align-items-center">
                            <i class="fas fa-chalkboard-teacher text-success me-2"></i>
                            <small>{{video.teacher.get_full_name|truncatewords:2}}</small>
                          </div>
                        {% else %}
                          <span class="badge bg-secondary">N/A</span>
                        {% endif %}
                      </td>
                      <td class="cell">
                        {% if video.subject %}
                          <span class="badge bg-primary">{{video.subject.name|truncatewords:2}}</span>
                        {% else %}
                          <span class="badge bg-secondary">N/A</span>
                        {% endif %}
                      </td>
                      <td class="cell">
                        {% if video.level %}
                          <span class="badge bg-info">{{video.level.name}}</span>
                        {% else %}
                          <span class="badge bg-secondary">N/A</span>
                        {% endif %}
                      </td>
                      <td class="cell">
                        {% if video.course %}
                          <small class="text-muted">{{video.course.title|truncatewords:3}}</small>
                        {% else %}
                          <span class="badge bg-secondary">N/A</span>
                        {% endif %}
                      </td>
                      <td class="cell">
                        {% if video.cost == 0 %}
                          <span class="badge bg-success">
                            <i class="fas fa-gift me-1"></i>FREE
                          </span>
                        {% else %}
                          <span class="badge bg-warning text-dark">
                            Rs. {{video.cost}}
                          </span>
                        {% endif %}
                      </td>
                      <td class="cell">
                        <a
                          class="btn btn-sm btn-outline-primary"
                          href="{% url 'dashboard:video_detail' video.id %}"
                          ><i class="fas fa-eye me-1"></i>View</a
                        >
                      </td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
              <!--//table-responsive-->
            </div>
            <!--//app-card-body-->
          </div>
          <!--//app-card-->
        </div>
        <!--//tab-pane-->
      </div>
      <!--//tab-content-->
    </div>
    <!--//container-fluid-->
  </div>
  <!--//app-content-->
</div>
<!--//app-wrapper-->

{% endblock %} {% block extra_scripts %}
<script src="{% static 'dashboard/assets/plugins/popper.min.js' %}"></script>
<script
  src="{% static 'dashboard/assets/plugins/bootstrap/js/bootstrap.min.js' %}"
></script>

<!-- Page Specific JS -->
<script src="{% static 'dashboard/assets/js/app.js' %}"></script>
<script src="{% static 'dashboard/assets/js/page-search.js' %}"></script>
<script>initPageSearch('videos-search', 'videos-table');</script>
{% endblock %}
